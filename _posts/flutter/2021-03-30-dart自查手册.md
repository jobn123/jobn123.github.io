---
layout:     post
title:      "Dartè‡ªæŸ¥æ‰‹å†Œ"
subtitle:   " ğŸ“„ "
date:       2021-03-30 12:00:00
author:     "Hiz"
header-img: "img/flutter02.jpg"
catalog: true
tags:
    - Dart
---

# ç®€ä»‹
`dart`æ˜¯è°·æ­Œå¼€å‘çš„ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œå¯ä»¥ç”¨æ¥å¼€å‘ç§»åŠ¨ç«¯ã€webã€æœåŠ¡å™¨ç­‰é¢†åŸŸçš„å¼€å‘ã€‚

# æ•°æ®ç±»å‹

* String

  ```dart
  // å£°æ˜å¤åˆ¶
  String str = '';
  var str1 = 'str1';
  
  // å¯ä»¥å†™å¤šè¡Œå­—ç¬¦ä¸²
  String str2 = '''str2
  str2
  str2
  '''
    
  // å­—ç¬¦ä¸²æ‹¼æ¥
   print('str1'+'str2');
  // ç±»ä¼¼es6æ¨¡æ¿å­—ç¬¦ä¸² 
   print('$str1 $str2');
  ```

* intã€double

  ```dart
  int a = 12;
  var a1 = 12;
  
  /**
  * int ç±»å‹ä¸èƒ½èµ‹å€¼ä¸ºdouble
  * double ç±»å‹ æ—¢å¯ä»¥æ˜¯int,ä¹Ÿå¯ä»¥æ˜¯double
  */
  double b1 = 12.0;
  a = 13.0; // æŠ¥é”™
    
  b1 = 13; // æ²¡é—®é¢˜
  
  // è‡ªå¢++ï¼Œ è‡ªå‡ --
  int a = 10;
  int b = a++; // å…ˆèµ‹å€¼åè¿ç®— a 11 b 10
  int c = ++a; // è¿ç®—åèµ‹å€¼ c 12 a 12
  ```

* bool

  ```dart
  bool b1 = true;
  b1 = false;
  ```

* List (æ•°ç»„/é›†åˆ)

  ```dart
  // é›†åˆçš„å®šä¹‰
  // å®šä¹‰ä¸åŒæ•°æ®ç±»å‹çš„é›†åˆ
  var l1 = ['str', 1, true];
  List l1 = ['str', 1, true];
  
  // å®šä¹‰æŒ‡å®šæ•°æ®ç±»å‹çš„é›†åˆ
  var l2 = <String>['z', 'y', 'x'];
  List<String> list = ['sd', '543', 'jiji'];
  List<int> list = [1, 2, 3];
  
  // å‘é›†åˆä¸­æ·»åŠ å…ƒç´ 
  l2.add(4);
  l2.add(5);
  
  // åˆ›å»ºå›ºå®šé•¿åº¦çš„é›†åˆ
  // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é›†åˆçš„é•¿åº¦ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»¥ä»€ä¹ˆå†…å®¹å¡«å……
  // é›†åˆåˆ›å»ºå¥½ä¹‹åï¼Œä¸èƒ½åœ¨æ‰§è¡Œadd æ–¹æ³•æ·»åŠ åŸè‰²ï¼Œåªèƒ½ä¿®æ”¹å…ƒç´ çš„å€¼
  var l3 = List.filled(4, 4)
  var l4 = List<String>.filled(4, ""); // æŒ‡å®šæ•°æ®ç±»å‹
  // [4, 4, 4, 4]
  
  // æ¸…ç©ºlist
  // ä»¥æŒ‡å®šé›†åˆé•¿åº¦åˆ›å»ºçš„listï¼Œæ˜¯æ— æ³•ä¿®æ”¹lengthé•¿åº¦çš„
  l1.length = 0
  
  /**
   * List å¸¸ç”¨å±æ€§æ–¹æ³•
   * 
   * å¸¸ç”¨å±æ€§
   *  length                            é•¿åº¦
   *  reversed                          ç¿»è½¬List
   *  isEmpty                           æ˜¯å¦ä¸ºç©º
   *  isNotEmpty                        æ˜¯å¦ä¸ä¸ºç©º
   * 
   * å¸¸ç”¨æ–¹æ³•
   *  add                               å¢åŠ å…ƒç´ 
   *  addAll                            å¢åŠ å¤šä¸ªå…ƒç´ 
   *  indexOf                           åˆ¤æ–­å…ƒç´ æ˜¯å¤Ÿå­˜åœ¨ï¼Œè¿”å›ç´¢å¼•å€¼ï¼Œæ²¡æœ‰è¿”å›-1
   *  remove("")                        åˆ é™¤å…ƒç´ ï¼Œ æ ¹æ®ä¼ å…¥å…·ä½“å€¼
   *  removeAt(index)                   åˆ é™¤å…ƒç´ ï¼Œæ ¹æ®ä¼ å…¥çš„ç´¢å¼•å€¼
   *  fillRange(start, end, value)      ä¿®æ”¹å…ƒç´ 
   *  insert(index, value)              æŒ‡å®šä½ç½®æ’å…¥å€¼
   *  insertAll(index, list)            æŒ‡å®šä½ç½®æ’å…¥List
   *  toList()                          å…¶ä»–ç±»å‹è½¬æ¢ä¸ºList
   *  join()                            è½¬æ¢å­—ç¬¦ä¸²
   *  split()                           å­—ç¬¦ä¸²è½¬æ¢List
   *  forEach                           å¾ªç¯éå†
   *  map                               å¾ªç¯éå†
   *  where                             å¾ªç¯éå†å°†æ»¡è¶³æ¡ä»¶çš„è¿”å›æ–°é›†åˆ
   *  any                               åªè¦æ•°ç»„ä¸­æœ‰ä¸€ä¸ªæ¡ä»¶ç¬¦åˆåˆ™è¿”å›true,å¦åˆ™false
   *  every                             æ•°ç»„ä¸­å…¨éƒ¨æ¡ä»¶ç¬¦åˆåˆ™è¿”å›true,å¦åˆ™false
   * 
   */
  ```

* Set å»é‡é›†åˆ

  ```dart
  var s = new Set();
  s.add(1);
  s.add(2);
  s.add(1);
  print(a); // 1 2
  
  // Setè½¬list
  s.toList();
  
  // List é€šè¿‡ Setå»é‡
  List l1 = [1, 2, 3, 1, 2, 4, 5, 6, 3];
  var s2 = new Set();
  s2.addAll(l1);
  s2.toList();
  print(s2); // 1 2 3 4 5 6
  ```

  

* Map(å¯¹è±¡/å­—å…¸)

  ```dart
  // å®šä¹‰
  var person = {
  	"name": "john",
    "age": 10
  };
  
  var p1 = new Map();
  
  // è·å–å€¼
  print(person['name'])
    
  // èµ‹å€¼
  p1['sex'] = 'male';
  
  /**
    * Map å¸¸ç”¨å±æ€§æ–¹æ³•
    * 
    * å¸¸ç”¨å±æ€§
    *  keys                              æ‰€æœ‰keys
    *  values                            æ‰€æœ‰values
    *  isEmpty                           æ˜¯å¦ä¸ºç©º
    *  isNotEmpty                        æ˜¯å¦ä¸ä¸ºç©º
    * 
    * å¸¸ç”¨æ–¹æ³•
    *  remove(key)                       åˆ é™¤å…ƒç´ ï¼Œ æ ¹æ®ä¼ å…¥å…·ä½“å€¼
    *  addAll({...})                     å¢åŠ å±æ€§
    *  containsValue                     æŸ¥çœ‹æ˜¯å¦åŒ…å«æŸä¸ªå€¼ true/false
    *  forEach                           å¾ªç¯éå†
    *  map                               å¾ªç¯éå†
    *  where                             å¾ªç¯éå†å°†æ»¡è¶³æ¡ä»¶çš„è¿”å›æ–°é›†åˆ
    *  any                               æœ‰ä¸€ä¸ªæ¡ä»¶æ»¡è¶³åˆ™è¿”å›tureå¦åˆ™false
    *  every                             æ¡ä»¶éƒ½æ»¡è¶³è¿”å›true,å¦åˆ™è¿”å›false
    * 
  */
  ```

# ç±»å‹è½¬æ¢

```dart
// Number String ä¹‹é—´è½¬æ¢
// Number.toString()ã€ int.parse()
String str = '12';
int.parse(str);
print(str is int); // true

int k = 123;
k.toString();
print(k is String); // true

//æ³¨æ„ï¼å­—ç¬¦è½¬è½¬æ¢æ•°å­—æ—¶å°½é‡ä½¿ç”¨double.parse, "12.1"ä½¿ç”¨int.pareseè½¬æ¢ä¼šæŠ¥é”™


// å…¶ä»–ç±»å‹è½¬æ¢bool
// 1ã€ isEmpty åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºè¿”å›true, å¦åˆ™è¿”å›false
// 2ã€ == åˆ¤è¯»å€¼ç±»å‹éƒ½ç›¸ç­‰è¿”å›true, å¦åˆ™è¿”å›false
// 3ã€ isNanåˆ¤æ–­æ•°å­—æ˜¯å¦ä¸ºæœ‰æ•ˆæ•°å­—
```



# ç±»å‹åˆ¤æ–­

```dart
var str = 'str'

if (str is String) { print('string type') }
```

# è¿ç®—ç¬¦

```dart
// ç®—æœ¯è¿ç®—ç¬¦
// + - * / ~/(å–æ•´) % ï¼ˆå–ä½™ï¼‰

// å…³ç³»è¿ç®—ç¬¦
// == != < <= > >=

// é€»è¾‘è¿ç®—ç¬¦
// !(å–å) &&(å¹¶ä¸”) ||(æˆ–è€…)

// èµ‹å€¼è¿ç®—ç¬¦
// = ??= += -+ *= /= %= ~/=

int a = 1;
int b = 2;
int c = a + b; // ä»å³å‘å·¦

// d??=23 è¡¨ç¤ºå¦‚æœdä¸ºç©ºï¼Œå°†23èµ‹å€¼ç»™d
int d;
d??=23;
print(d); // 23

// ä¸‰ç›®è¿ç®—ç¬¦
bool b2 = true;
var b3 = b2 ? 1 : 2;

// ??è¿ç®—ç¬¦
int x;
int y = x ?? 10;
print(y); // 10
```

# å¾ªç¯

```dart
// for å¾ªç¯
// whileã€ do...while. whileä¸do...whileçš„åŒºåˆ«åœ¨äºç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œä¸ç®¡æ¡ä»¶æ˜¯å¦ç¬¦åˆdoWhileå§‹ç»ˆä¼šæ‰§è¡Œä¸€æ¬¡
// continueã€ break

for (int a = 0; a < 10; a++) {print(a)}; // 0~9

// continue è·³å‡ºå½“å‰å¾ªç¯ä½“ç»§ç»­æ‰§è¡Œ
for (int a = 0; a < 10; a++) {
  if (a == 3) {
    continue;
  }
  print(a); // 0 1 2 4 5 6 7 8 9
}

// break; ç»ˆæ­¢å¾ªç¯ï¼Œä¸”åªèƒ½ç»ˆæ­¢ä¸€å±‚å¾ªç¯ã€‚
for (int a = 0; a < 10; a++) {
  if (a == 3) {
    break;
  }
  print(a); // 0 1 2
}
```

# å‡½æ•°ã€æ–¹æ³•

```dart
// æ— è¿”å›å€¼æ–¹æ³•
void print () {print('print');}

// æŒ‡å®šè¿”å›ç±»å‹
int add () { return 1; };

// å¯é€‰å‚æ•°ç”¨ä¸­æ‹¬å·æ‹¬èµ·æ¥,å¹¶è®¾ç½®é»˜è®¤å€¼
String getUserInfo (String name, [int age=0, String sex]) {
  return 'å§“åï¼š$name å¹´é¾„ï¼š$age';
}

getUserInfo('tom');
getUserInfo('tom', 20);

// å‘½åå‚æ•°
String getUserInfoAgain(String name, int age, { String sex = 'ç”·'}) {
  return 'å§“åï¼š$name å¹´é¾„ï¼š$age æ€§åˆ«ï¼š$sex';
}

getUserInfoAgain('jack',  20, sex: 'å¥³');

// è‡ªæ‰§è¡Œå‡½æ•°
((n) {
  print(n);
})(1)

// é€’å½’
var sum = 1;
fn(n) {
  sum *= n;
  if (n == 1) return;
	fn(n - 1);
}

fn(5)

```

# ç±»

```dart
// 1
class Person {
  // å®šä¹‰å±æ€§
  String name = 'èµµå››';
  int age = 12;
	
  // é»˜è®¤æ„é€ å‡½æ•°ï¼Œåœ¨ç±»å®ä¾‹åŒ–çš„æ—¶å€™è‡ªåŠ¨è§¦å‘
  Person() {
    print('æ„é€ å‡½æ•°');
  }
  
  // å®šä¹‰æ–¹æ³•
  void getInfo() {
    print('${this.name}${this.age}');
  }
}

void main() {
  var p = new Person(); // new å¯ä»¥çœç•¥
  print(p.name); // èµµå››
  p.getInfo();  // èµµå››12
}

//2 é€šè¿‡æ„é€ å‡½æ•°ï¼Œåœ¨ç±»å®ä¾‹åŒ–æ—¶ä¼ å‚æ•°
class Person {
  String name = '';
  int age = 0;

  // æ„é€ å‡½æ•°ï¼Œåœ¨ç±»å®ä¾‹åŒ–çš„æ—¶å€™è‡ªåŠ¨è§¦å‘
  // æ„é€ å‡½æ•°ä¼ å‚ ç®€å†™ Person(this.name, this.age);
  Person(String name, int age) {
    this.name = name;
    this.age = age;
    // print('æ„é€ å‡½æ•°');
  }

  void getInfo() {
    print('${this.name}${this.age}');
  }
}

Person p1 = Person('tom', 12);
Person p2 = Person('rose', 13);

// 3 å‘½åæ„é€ å‡½æ•°, å¯ä»¥è®¾ç½®å¤šä¸ª
class Person {
  // å‘½åæ„é€ å‡½æ•°
  Person.test() {
    print('testå‘½åæ„é€ å‡½æ•°');
  }
}

Person p3 = Person.test();

// 4 ç§æœ‰å±æ€§ æ–¹æ³• åŠ _
// ä¸èƒ½ä¸å®ä¾‹åŒ–çš„å¯¹è±¡è°ƒç”¨ï¼Œå‰ææ˜¯ä¸åœ¨åŒä¸€æ–‡ä»¶ä¸­
// è¦æƒ³è®¿é—®ç§æœ‰çš„å±æ€§å¯ä»¥é€šè¿‡å…¬æœ‰çš„æ–¹æ³•å°†å€¼è¿”å›

// 5 get set ä¿®é¥°ç¬¦
class Rect {
  num height;
  num width;

  Rect(this.height, this.width);

  // get ä¿®é¥°ç¬¦
  get area {
    return this.width * this.height;
  }
  
  // set ä¿®é¥°ç¬¦
  set rectWidth(w) {
    this.width = w;
  }
}

var r = Rect(10, 20);
print('${r.area}');

// 6 åœ¨æ„é€ å‡½æ•°è¿è¡Œä¹‹å‰åˆå§‹åŒ–å˜é‡
class Rect {
  num height;
  num width;

	Rect(): height=10, width=10 {}
}

// 7 é™æ€å±æ€§ï¼Œæ–¹æ³•
/*
 * é™æ€æ–¹æ³•ä¸èƒ½è®¿é—®éé™æ€æˆå‘˜ï¼Œéé™æ€æ–¹æ³•å¯ä»¥è®¿é—®é™æ€æˆå‘˜
 * é™æ€å±æ€§å’Œæ–¹æ³•ä¸èƒ½ä»¥å®ä¾‹çš„æ–¹å¼è°ƒç”¨ï¼Œåªèƒ½ç”¨ç±»ç›´æ¥è°ƒç”¨
 */
class Person {
  static String name = '';
  int age = 18;

  static void pringName() {
    // ä¸èƒ½è®¿é—®age
    print(name);
  }
  
  void printNameTwo() {
    // é™æ€ã€éé™æ€å±æ€§éƒ½å¯ä»¥è®¿é—®
    print(name);
    print(this.age);
    // è°ƒç”¨é™æ€æ–¹æ³•
    pringName();
  }
}

main(List<String> args) {
  Person.name;
  Person.pringName();
}

// 8 ç»§æ‰¿
// å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»å¯è§çš„å±æ€§ä»¥åŠæ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œæ„é€ å‡½æ•°æ— æ³•ç»§æ‰¿
class Car {
  String name;
  int wheel;
  
  Car(this.name, this.wheel);

  void getCarInfo() {
    print('${this.name}, ${this.wheel}');
  }
  
  stop () {
    print('Car stop');
  }
}

class Benz extends Car {
  String level;
  Benz(String name, int wheel, String level) : super(name, wheel) {
    this.level = level;
  }
  run () {
    print('Benz is running');
  }
  // é‡å†™çˆ¶ç±»æ–¹æ³•
  @override
  stop () {
    // å­ç±»è°ƒç”¨çˆ¶ç±»æ–¹æ³•
    super.stop();
    print('Benz stop');
  }
}

```

# æŠ½è±¡ç±»ã€å¤šæ€

```dart
// 1ã€æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œç»§æ‰¿ä»–çš„å­ç±»å¯ä»¥
abstract class Animal {
  // æŠ½è±¡æ–¹æ³•
  eat();
  // æ™®é€šæ–¹æ³•
  printAnimal() {
    print('--xx--');
  }
}

class Cat extends Animal {
  // ç»§æ‰¿æŠ½è±¡ç±»ï¼Œå¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•
  @override
  eat() {
    print('cat eat');
  }
}

// 2. å¤šæ€
class Cat extends Animal {
  // ç»§æ‰¿æŠ½è±¡ç±»ï¼Œå¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•
  @override
  eat() {
    print('cat eat');
  }
  run () {
    print('cat run');
  }
}

class Dog extends Animal {
  // ç»§æ‰¿æŠ½è±¡ç±»ï¼Œå¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•
  @override
  eat() {
    print('Dog eat');
  }
  run () {
    print('Dog run');
  }
}

// æ™ºèƒ½ä½¿ç”¨eat ä¸èƒ½ä½¿ç”¨run
Animal cat = Cat();
cat.eat();

Animal dog = Dog();
dog.eat();


```

# æ¥å£

```dart
// æ¥å£ç”¨äºå®šä¹‰è§„åˆ™ã€çº¦æŸ
abstract class Db {
  String uri = '';
  add();
  save();
  del();
}

class Mysql implements Db {
  @override
  String uri = '';

  Mysql(this.uri);

  @override
  add() {
    // TODO: implement add
    throw UnimplementedError();
  }

  @override
  del() {
    // TODO: implement del
    throw UnimplementedError();
  }

  @override
  save() {
    // TODO: implement save
    throw UnimplementedError();
  }
}

main() {
  var mq = Mysql('x');
}

// 2 ç±»ç»§æ‰¿å¤šæ¥å£ï¼Œç”¨,åˆ†éš”ï¼Œå¹¶ä¸”è¦å®ç°å…¨éƒ¨çš„æŠ½è±¡ç±»çš„æ–¹æ³•
class A implements B,C {}
```

# Mixins

```dart
class A {
  void printA() { print('A'); }
}

class B {
  void printB() { print('B'); }
}

class D {
  void printD() { print('D'); }
}

// å¯ä»¥ç»§æ‰¿Aï¼ŒBçš„æ‰€æœ‰å±æ€§ã€‚
// A,Bä¸èƒ½ç»§æ‰¿å…¶ä»–ç±»
// Cä¸èƒ½æœ‰æ„é€ å‡½æ•°
// Cå¯ä»¥ç»§æ‰¿å…¶ä»–ç±»
// å¦‚æœAï¼ŒBæœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œæ‰§è¡ŒBçš„ã€‚åé¢æ›¿æ¢å‰é¢
Class C extends D with A,B {}

var c1 = new C()
c.printA();
c.printB();
```

# å¯¹è±¡æ“ä½œç¬¦

```dart
class Person {
  String name;
  int age;
  Person(this.name, this.age);
  void getInfo() {
    print('$name, $age');
  }
}

// 1ã€? 
Person p;
p?.getInfo()
  
// 2ã€is
Person p2 = Person('tom', 18)
p2 is Persion // true
p2 is Object // true æ‰€æœ‰çš„å¯¹è±¡éƒ½ç»§æ‰¿è‡ªObject 
  
// 3ã€as
var p3;
p3 = new Person('tom', 18);
(p3 as Person).getInfo();

// 4ã€ .. çº§è”æ“ä½œ
Person p4 = Person('tom', 18);

p4..name = 'jerry'
  ..age = 17
  ..getInfo();
```

# æ³›å‹

```dart
// 1ã€æ³›å‹æ–¹æ³•
T getVal<T>(T value) {
  return value;
}

getVal(21);
getVal('value');

// æŒ‡å®šè¿”å›ç±»å‹
getVal<int>(21);
getVal<String>('value');

// 2 æ³›å‹ç±»
class DynmicList {
  List list = <T>[];
  void add(T value) {
    this.list.add(value);
  }
  List getList () {
    return this.list;
  }
}

var l1 = DynmicList();
l1.add('str');
l1.add(2);

// æŒ‡å®šä¼ å…¥çš„ç±»å‹
var l2 = DynmicList<String>();
l1.add('str');
l1.add(2);

// 3 æ³›å‹æ¥å£
abstract class Cache<T> {
  getByKey(String key);
  void setByKey(String Key, T value);
}

class FlieCache<T> implements Cache<T> {
  @override
  getByKey(String key) {
    return null;
  }

  @override
  void setByKey(String Key, T value) {}
}

class MemoryCache<T> implements Cache<T> {
  @override
  getByKey(String key) {
    return null;
  }

  @override
  void setByKey(String Key, T value) {}
}

main() {
  MemoryCache m = new MemoryCache<int>();
  m.setByKey('test', 1);
  
  MemoryCache m2 = new MemoryCache<String>();
  m.setByKey('test', 'str');
  
  MemoryCache m3 = new MemoryCache<Map>();
  m.setByKey('test', {"name": 'x'});
}
```

# åº“çš„ä½¿ç”¨

```dart
// 1 è‡ªå®šä¹‰åº“
import 'lib/x.dart';

// 2 ç³»ç»Ÿå†…ç½®åº“
import 'dart:math';
import 'dart:io';

// 3 æ‰˜ç®¡åˆ°pubä¸­çš„ç¬¬ä¸‰æ–¹åº“
// åœ¨pubspec.yaml é…ç½®åº“åç§°ã€‚ç‰ˆæœ¬å·
// pub get ä¸‹è½½
// åœ¨é¡¹ç›®ä¸­å¼•ç”¨ import 

// 4 å¼•å…¥åº“é‡å‘½å
import 'lib/a.dart' as b;

// 5 éƒ¨åˆ†å¯¼å…¥ show
import 'lib/a.dart' show getName;

// 6 éƒ¨åˆ†å¯¼å…¥ hide éšè—getName
import 'lib/a.dart' hide getName;

// 7 å»¶æ—¶åŠ è½½åº“ deferred
import 'package:deferred/hello.dart' deferred as hello;
```

