---
layout:     post
title:      "typescriptè‡ªæŸ¥æ‰‹å†Œ"
subtitle:   " ğŸ“˜ "
date:       2020-02-02 12:00:00
author:     "Hiz"
header-img: "img/post-bg-2015.jpg"
catalog: true
tags:
    - typescript
---

# åŸºæœ¬æ•°æ®ç±»å‹

* æ•°å­—

  ```typescript
  const a: number = 3;
  ```

* å­—ç¬¦ä¸²

  ```typescript
  const b: string = 'str'
  ```

* å¸ƒå°”

  ```typescript
  const b: boolean = false
  ```

* æšä¸¾

  ```typescript
  enum oStatus {
  	start,
  	complete
  }
  
  // start as 1
  enum orderStatus {
  	start = 1,
  	complete
  }
  
  enum stringEnum {
  	start = 'start',
  	end = 'end'
  }
  ```

* æ•°ç»„

  ```typescript
  const c: number[] = [1, 2, 3];
  const d: Array<number> = [1, 3];
  const arr: any[] = [1, "33", true];
  ```

* å…ƒç»„

  ```typescript
  const truple: [number, string] = [1, "www"];
  // å¯ä»¥ä¸ºæ•°ç»„ä¸­çš„æ¯ä¸ªå‚æ•°å®šä¹‰ç›¸å¯¹åº”çš„ç±»å‹
  ```

* å¯¹è±¡

  ```
  const obj: object = {};
  ```

* **undefined**

  ```typescript
  const und: undefined = undefined
  let numberOrUndefined: number | undefined;
  ```

* null

  ```typescript
  let k: null;
  ```

* void æŒ‡å®šæ–¹æ³•è¿”å›ç±»å‹

  ```typescript
  const dump = (): void => {
    console.log('1')
  }
  
  const returnNumebr = (): number => {
  	return 1
  } 
  ```

* **never** 

  ```typescript
  // å…¶ä»–ç±»å‹ (åŒ…æ‹¬nullå’Œundefined)çš„å­ç±»å‹ï¼Œä»£è¡¨ä»ä¸ä¼šå‡ºç°çš„å€¼
  
  let l: never;
  
  //åŒ¿åå‡½æ•°å¹¶æŠ›å‡ºå¼‚å¸¸
  l = (() => {
    throw new Error("111");
  })();
  ```

* any ä»»æ„ç±»å‹

  ```typescript
  let i: any = 1
  i = 'string'
  ```

# å‡½æ•°

* å‡½æ•°å£°æ˜

  ```typescript
  const func = (): void => {} 
  ```

* å‰©ä½™å‚æ•°

  ```typescript
  //ä¼ é€’å¤šä¸ªæ—¶ï¼Œå¦‚æœç”¨äº†å‰©ä½™å‚æ•°ï¼Œå°±å¯ä»¥æŠŠæœªå®šä¹‰çš„å½¢å‚è½¬æ¢ä¸ºæ•°ç»„ã€‚
  
  function sum (a: number, b: number, ...arr: number[]): number {
    let sum: number = a + b;
    arr.forEach((element) => {
      sum += element;
    });
    console.log(arr); [3,4,5]  
    return sum;
  }
  console.log(sum(1, 2, 3, 4, 5)); //15
  ```

* å‡½æ•°é‡è½½

  `è¢«é‡è½½`çš„æ–¹æ³•ï¼Œæ²¡æœ‰æ–¹æ³•ä½“`ï¼Œå¯ä»¥æ ¹æ®å‚æ•°çš„ç±»å‹èµ°å…¶ä¸­ä¸€ä¸ªæ–¹æ³•å¹¶åˆ¤æ–­å‚æ•°ï¼Œä½†å¦‚æœ`ä¼ å…¥çš„å‚æ•°ç±»å‹ä¸æ˜¯ä»»ä½•è¢«é‡è½½æ–¹æ³•çš„å‚æ•°ç±»å‹`å°±ä¸å…è®¸é€šè¿‡ã€‚

  ```typescript
  function reload(name: string): string;
  function reload(age: number): string;
  function reload(param: any): any {
    return typeof param === "string" ? `æˆ‘æ˜¯:${param}` : `æˆ‘çš„å¹´é¾„:${param}`;
  }
  console.log(reload(18)); //å¹´é¾„
  ```

# ç±»å‹åˆ«å

```typescript
type Age = number
type AgeCreator = () => Age
function getAge(arg: AgeCreator): Age {
	return arg()
}

type Person<T> = { age: T }
type Persons<T> = {
	name: T,
	son: Person<T>
}
```

# å­—é¢é‡ç±»å‹

```typescript
type Profession = "teacher" | "student" | "doctor"
function getZY(str: Profession): Profession {
	return str
}
getZY('teacher')
getZY('student')
```

# ç´¢å¼•ç±»å‹

```typescript
// ç´¢å¼•ç±»å‹
function plunk<T, K extends keyof T>(obj: T, names: K[]): T[K][] {
	return names.map(name => obj[name])
}

plunk({ name: 's' }, ['name'])

type ReadOnly<T> = {
	readonly [P in keyof T]: T[P]
}

type Partiall<T> = {
	[P in keyof T]?: T[P]
}

interface Personn {
	readonly name: string
	readonly age?: string
}

type PersonReadOnly = ReadOnly<Personn>
type PersonPartiall = ReadOnly<Personn>

// å¯ç´¢å¼•ç±»å‹
interface StringArray {
	[index: number]: string
}
let myArray: StringArray = ['name', 'age']
myArray[0]
```

# ç±»å‹æ–­è¨€

```typescript
// ç±»å‹æ–­è¨€<> as
let oneString: any = 'this is a string'
let stringLength: number = (<string>oneString).length
let stringLength2: number = (oneString as string).length
```

# symbol

```typescript
// Symbol
const symbol = Symbol()
const symbol2 = Symbol('string')
const symbol3 = Symbol("string")

const obj = {
 	[symbol]: 'value'
}

console.log(obj)
```

# ç±»

```typescript
class Person {
  // ç§æœ‰å˜é‡
  private name: string;
  
  // æ„é€ å‡½æ•°
  constructor(name: string) {
    this.name = name;
  }
  
  // è·å–åå­—
  getName(): string {
    return this.name;
  }
  
  // è®¾ç½®åå­—
  setName(name: string): void  {
    this.name = name;
  }
}

let p = new Person("å¼ ä¸‰");
p.setName("æå››");
console.log(p);
```

## ç»§æ‰¿

```typescript
class Son extends Person {
 // é™æ€å±æ€§
  public static age: number = 18;
  // å­¦æ ¡
  public school: string;
  //æ„é€ æ–¹æ³•
  constructor(name: string, school: string) {
    // è®¿é—®æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ä¸­çš„ "this" å‰ï¼Œå¿…é¡»è°ƒç”¨ "super",åˆå§‹åŒ–çˆ¶ç±»æ„é€ å‡½æ•° --å¹¶æŠŠå‚æ•°ä¼ ç»™çˆ¶ç±»
    super(name); 
    //æŠŠä¼ è¿›æ¥çš„schoolèµ‹å€¼ç»™å…¨å±€å˜é‡
    this.school = school;
  }
  
  //é™æ€æ–¹æ³•
  static run(name: string): string {
    return `${name}åœ¨è·‘æ­¥,ä»–çš„å¹´é¾„æ‰${this.age}`;
  }
}

let son = new Son("ç‹äº”", "æ¸…åå¤§å­¦");
son.setName("èµµå…­"); // ç§æœ‰ç±»ä¹Ÿä¸èƒ½åœ¨å­ç±»çš„å¤–éƒ¨è®¿é—®,ä½†å¯é€šè¿‡å…¬å¼€çš„æ–¹æ³•ä¸­è¿›è¡Œèµ‹å€¼å’Œè®¿é—®
console.log(son);
console.log(Son.run("æ–¹ä¸ƒ"));
console.log(Son.age);
```

1. public åœ¨å½“å‰ç±»é‡Œé¢ï¼Œå­ç±»ï¼Œç±»å¤–é¢éƒ½å¯ä»¥è®¿é—®
2. protected åœ¨å½“å‰ç±»å’Œå­ç±»å†…éƒ¨å¯ä»¥è®¿é—®ï¼Œç±»å¤–éƒ¨æ— æ³•è®¿é—®
3. private åœ¨å½“å‰ç±»å†…éƒ¨å¯è®¿é—®ï¼Œå­ç±»ï¼Œç±»å¤–éƒ¨éƒ½æ— æ³•è®¿é—®ã€‚
4. å±æ€§ä¸åŠ ä¿®é¥°ç¬¦,é»˜è®¤å°±æ˜¯å…¬æœ‰çš„ (public)

## å¤šæ€

```typescript
// æŠ½è±¡çˆ¶ç±»
abstract class Animal {
  private name: string;
  constructor(name: string) {
    this.name = name;
  }
  //æŠ½è±¡æˆå‘˜--æ–¹æ³•
  abstract eat(): any;
  //æŠ½è±¡æˆå‘˜--å±æ€§
  protected abstract ages: Number;
  sleep(): void {
    console.log("ç¡è§‰");
  }
}

class cat extends Animal {
  ages: Number = 2;
  constructor(name: string) {
    super(name);
  }
  //éæŠ½è±¡ç±»â€œcatâ€ä¸ä¼šè‡ªåŠ¨å®ç°ç»§æ‰¿è‡ªâ€œAnimalâ€ç±»çš„æŠ½è±¡æˆå‘˜â€œeatâ€,  å¿…é¡»æ‰‹åŠ¨å®šä¹‰çˆ¶ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•--å¤šæ€
  eat(): string {
    return "çŒ«åƒé±¼";
  }

  //å¤šæ€
  sleep(): string {
    return "çŒ«åœ¨ç¡è§‰";
  }
}

console.log(new cat("33").sleep());
```

# æ¥å£

æ¥å£å®šä¹‰äº†æŸä¸€æ‰¹ç±»æ‰€éœ€è¦éµå®ˆçš„è§„èŒƒï¼Œæ¥å£ä¸å…³å¿ƒè¿™äº›ç±»çš„å†…éƒ¨çŠ¶æ€æ•°æ®ï¼Œä¹Ÿä¸å…³å¿ƒè¿™äº›ç±»é‡Œæ–¹æ³•çš„å®ç°ç»†èŠ‚ï¼Œå®ƒåªè§„å®šè¿™æ‰¹ç±»é‡Œå¿…é¡»æä¾›æŸäº›æ–¹æ³•ï¼Œæä¾›è¿™äº›æ–¹æ³•çš„ç±»å°±å¯ä»¥æ»¡è¶³å®é™…éœ€è¦ã€‚tsä¸­çš„æ¥å£ç±»ä¼¼äºjavaï¼ŒåŒæ—¶è¿˜å¢åŠ äº†æ›´çµæ´»çš„æ¥å£ç±»å‹ï¼ŒåŒ…æ‹¬å±æ€§ã€å‡½æ•°ã€å¯ç´¢å¼•å’Œç±»ç­‰ã€‚

* ###### å±æ€§æ¥å£

```typescript
interface InterfaceName {
  first: string;
  second?: string; //åŠ ä¸ªé—®å·ï¼Œæ¥å£å±æ€§å°±å¯ä»¥å˜æˆå¯ä¼ å¯ä¸ä¼ äº†ï¼Œä¸ä¼ é»˜è®¤æ˜¯undefinedã€‚
}

//æ‰“å°å˜é‡
function logParam(name: InterfaceName): void {
  console.log(name.first, name.second, 11);
}

//å®šä¹‰å‚æ•°
const obj = { first: "1", second: "fff", three: 1 };
//logParam({ first: "1", second: "1", three: 1 }); //æŠ¥é”™,åªèƒ½ä¼ æ¥å£å®šä¹‰çš„å€¼
logParam(obj);
```

* ###### å‡½æ•°ç±»å‹æ¥å£

  ```typescript
  interface keyMap {
    (key: string, value: string): string;
  }
  let logKeyMap: keyMap = function (key1: string, value: string): string {
    return key1 + value;
  };
  console.log(logKeyMap("key1", "value"));
  ```

* ###### å¯ç´¢å¼•æ¥å£

  ```typescript
  // çº¦æŸæ•°ç»„
  interface Arr {
    [index: number]: string;
  }
  let ss: Arr = ["2121"];
  
  // çº¦æŸå¯¹è±¡
  interface Obj {
    [index: string]: string;
  }
  let interfaceArr: Obj = { aa: "1" };
  ```

* **ç±»ç±»å‹æ¥å£**

  ```typescript
  interface Animals {
    name: string;
    eat(): void;
  }
  
  class Dogs implements Animals {
    name: string;
    constructor(name: string) {
      this.name = name;
    }
    eat() {}
  }
  
  // -------------------------------------------------------
  // æ¥å£ç»§æ‰¿--æ¥å£å¯ä»¥ç»§æ‰¿æ¥å£
  interface Dog {
    eat(): void;
  }
  
  interface Persons extends Dog {
    work(): void;
  }
  
  class Cat {
    code() {
      console.log("çŒ«åœ¨æ•²ä»£ç ");
    }
  }
  
  //å¯ç»§æ‰¿ç±»åå†å®ç°æ¥å£
  class SuperMan extends Cat implements Persons {
    eat(): void {
      console.log(1);
    }
    work(): void {
      console.log(2);
    }
  }
  let superMan = new SuperMan();
  superMan.code();
  ```

# æ³›å‹

æ³›å‹å°±æ˜¯è§£å†³`ç±»`ã€`æ¥å£`ã€`æ–¹æ³•`çš„`å¤ç”¨æ€§`ï¼Œä»¥åŠå¯¹`ä¸ç‰¹å®šæ•°æ®ç±»å‹`çš„æ”¯æŒã€‚

è¦æ±‚:ä¼ å…¥çš„å‚æ•°å’Œè¿”å›çš„å‚æ•°ä¸€è‡´

* å‡½æ•°æ³›å‹

  ```typescript
  function getDate<T>(value: T): T {
    return value;
  }
  console.log(getDate<number>(123));
  ```

* ###### ç±»çš„æ³›å‹

  ```typescript
  class MinClass<T> {
    public list: T[] = [];
    //æ·»åŠ 
    add(value: T): void {
      this.list.push(value);
    }
    
    //æ±‚æœ€å°å€¼
    min(): T {
      //å‡è®¾è¿™ä¸ªå€¼æœ€å°
      let minNum = this.list[0];
      for (let i = 0; i < this.list.length; i++) {
      //æ¯”è¾ƒå¹¶è·å–æœ€å°å€¼
      minNum = minNum < this.list[i] ? minNum : this.list[i];
      }
      return minNum;
    }
  }
  //å®ä¾‹åŒ–ç±» å¹¶ä¸”æŒ‡å®šäº†ç±»çš„Tçš„ç±»å‹æ˜¯number
  let minClass = new MinClass<number>(); 
  minClass.add(23);
  minClass.add(5);
  minClass.add(2);
  console.log(minClass.min());
   //å®ä¾‹åŒ–ç±» å¹¶ä¸”æŒ‡å®šäº†ç±»çš„Tçš„ç±»å‹æ˜¯stringï¼Œåˆ™å…¶æ–¹æ³•çš„ä¼ å‚å’Œè¿”å›éƒ½æ˜¯stringç±»å‹
  let minClass2 = new MinClass<string>();
  minClass2.add("23");
  minClass2.add("5");
  minClass2.add("2");
  console.log(minClass2.min());
  ```

* ###### æ¥å£çš„æ³›å‹

  ```typescript
  // 1
  interface ConfigFn {
    //è§„èŒƒå‚æ•°ç±»å‹,è¿”å›å€¼ç±»å‹
    <T>(value: T): T;
  }
  
  let getData: ConfigFn = function <T>(value: T): T {
    return value;
  };
  
  console.log(getData<string>("z11"));
  
  
  // 2
  interface ConfigFn<T> {
    //å‚æ•°ç±»å‹ ï¼Œè¿”å›å€¼ç±»å‹
    (value: T): T;
  }
  
  //æ¥å£æ–¹æ³•
  function getData<T>(value: T): T {
    return value;
  }
  
  //ä½¿ç”¨æ¥å£
  let myGetDate: ConfigFn<string> = getData;
  console.log(myGetDate("3"));
  ```

* ###### ç±»å½“åšå‚æ•°ä¼ å…¥æ³›å‹ç±»

  ```typescript
  //ç”¨æˆ·ç±»--å’Œæ•°æ®åº“è¡¨å­—æ®µè¿›è¡Œæ˜ å°„
  class User {
    username: string | undefined;
    password: string | undefined;
    //æ„é€ å‡½æ•°-åˆå§‹åŒ–å‚æ•°
    constructor(param: {
      username: string | undefined;
      password?: string | undefined;
    }) {
      this.username = param.username;
      this.password = param.password;
    }
  }
  
  
  //æ•°æ®åº“ç±»
  class Db<T> {
    add(user: T): boolean {
      console.log(user);
      return true;
    }
    updated(user: T, id: number): boolean {
      console.log(user, id);
      return true;
    }
  }
  
  let u = new User({
    username: "å¼ ä¸‰",
  });
  
  //u.username = "æå››";
  u.password = "111111";
  let db = new Db<User>();
  db.add(u);
  db.updated(u, 1);
  ```

# å‘½åç©ºé—´

ä¸»è¦ç”¨äºç»„ç»‡ä»£ç ï¼Œé¿å…å‘½åå†²çªã€‚

```typescript
/**
 * éšç€ä»£ç çš„ä¸æ–­å¢åŠ ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ç»„ç»‡åœ°ç»„åˆä»£ç ã€‚
 * TypeScriptåœ¨1.xç‰ˆæœ¬ä¸­æä¾›äº†å‘½åç©ºé—´çš„æ–¹å¼è¿›è¡Œä»£ç ç»„ç»‡ï¼Œ
 * è¿™ä¹Ÿæ˜¯TypeScriptå®˜æ–¹ä»£ç çš„ç»„ç»‡æ–¹å¼
 * åŒæ—¶ï¼ŒTypeScriptè¿˜å®ç°äº†JavaScriptä¸­æµè¡Œçš„æ¨¡å—è§£å†³æ–¹æ¡ˆã€‚
 */

// å•æ–‡ä»¶å‘½åç©ºé—´
namespace Validity {
  export interface StringValid {
    isAcceptable(s: string): boolean
  }
}

// å¤šæ–‡ä»¶å‘½åç©ºé—´
// æˆ‘ä»¬æŠŠValidationå‘½åç©ºé—´åˆ†å‰²æˆå¤šä¸ªæ–‡ä»¶ã€‚
//å°½ç®¡è¿™äº›æ–‡ä»¶ä¸åŒï¼Œä½†æ˜¯ä»åœ¨åŒä¸€ä¸ªå‘½åç©ºé—´ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨çš„æ—¶å€™å°±å¦‚åŒåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰çš„ä¸€æ ·ã€‚
// å› ä¸ºä¸åŒæ–‡ä»¶ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬åŠ å…¥äº†å¼•ç”¨æ ‡ç­¾æ¥å‘Šè¯‰ç¼–è¯‘å™¨æ–‡ä»¶ä¹‹é—´çš„å…³è”

// A.ts
/// <reference path="Validity.ts"/>
/// <reference path="b.ts"/>

// modules/Animal.ts
export namespace A {
  interface Animal {
    name: String;
    eat(): void;
  }

  export class Dog implements Animal {
    name: String;
    constructor(theName: string) {
      this.name = theName;
    }
    eat() {
      console.log("æˆ‘æ˜¯" + this.name);
    }
  }
}

export namespace B {
  interface Animal {
    name: String;
    eat(): void;
  }

  export class Dog implements Animal {
    name: String;
    constructor(theName: string) {
      this.name = theName;
    }
    eat() {}
  }
}

  
  
// ä½¿ç”¨
import { A, B } from "./modules/Animal";
let ee = new A.Dog("å°è´");
ee.eat();

```

# è£…é¥°å™¨

```typescript
/**
 * TypeScriptè£…é¥°å™¨å·¥å‚æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒèƒ½å¤Ÿæ¥å—å‚æ•°ï¼Œ
 * å¹¶ä½¿ç”¨è¿™äº›å‚æ•°æ¥è¿”å›å®é™…çš„è£…é¥°å™¨ã€‚
 * è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ°ç±»å£°æ˜ï¼Œå±æ€§ï¼Œ è®¿é—®ç¬¦ï¼Œæ–¹æ³•æˆ–æ–¹æ³•å‚æ•°ä¸Šã€‚
 * è£…é¥°å™¨ä½¿ç”¨ @expressionè¿™ç§å½¢å¼ï¼Œexpressionæ±‚å€¼åå¿…é¡»ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šåœ¨è¿è¡Œæ—¶è¢«è°ƒç”¨ï¼Œè¢«è£…é¥°çš„å£°æ˜ä¿¡æ¯åšä¸ºå‚æ•°ä¼ å…¥ã€‚
 * ä¸€ã€è£…é¥°å™¨çš„ç§ç±»
 * 1ã€æ ¹æ®è£…é¥°å™¨çš„ä½ç½®
    ç±»è£…é¥°å™¨
    ç±»å‡½æ•°è£…é¥°å™¨
    ç±»å±æ€§è£…é¥°å™¨
    ç±»å‡½æ•°å‚æ•°è£…é¥°å™¨
    2ã€æ ¹æ®è£…é¥°å™¨æ˜¯å¦æœ‰å‚æ•°
    æ— å‚è£…é¥°å™¨(ä¸€èˆ¬è£…é¥°å™¨)
    æœ‰å‚è£…é¥°å™¨(è£…é¥°å™¨å·¥å‚)
    https://blog.csdn.net/ZZB_Bin/article/details/103168609?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param
 */

//  ç±»è£…é¥°å™¨ç±»å‹å®šä¹‰
declare type ClassDecoratorType = <TFunction extends Function>(target: TFunction) => TFunction | void;

// å±æ€§è£…é¥°å™¨ç±»å‹å®šä¹‰
declare type PropertyDecoratorType =
  (target: Object, propertyKey: string | symbol) => void;

// æ–¹æ³•è£…é¥°å™¨å’Œè®¿é—®ç¬¦è£…é¥°å™¨ç±»å‹å®šä¹‰
declare type MethodDecoratorType = <T>(
  target: Object, propertyKey: string | symbol,
  descriptor: TypedPropertyDescriptor<T>) =>
  TypedPropertyDescriptor<T> | void;

// æ–¹æ³•å‚æ•°è£…é¥°å™¨ç±»å‹å®šä¹‰
declare type ParameterDecoratorType =
  (target: Object, propertyKey: string | symbol, parameterIndex: number) => void;


//  1ã€ç±»çš„è£…é¥°å™¨
function desc(target: any) {
  console.log('---------------ç±»çš„è£…é¥°å™¨å‚æ•° start------------------');
  console.log(target); // è¾“å‡º [Function: Person]è¡¨ç¤ºå½“å‰è£…é¥°çš„ç±»
  console.log('---------------ç±»çš„è£…é¥°å™¨å‚æ•° end------------------');
  return class extends target {
    public name: string;
    public age: number;

    constructor(name: string, age: number) {
      super()
      this.name = name
      this.age = age
    }
  }
}

@desc // ä½¿ç”¨è£…é¥°å™¨
class Personn {
  public name: string;
  public age: number;

  constructor(name: string, age: number) {
    this.name = name;
    this.age = age;
  }
}

let p = new Personn('å“ˆå“ˆ', 20);

// 2ã€ä½¿ç”¨ç±»çš„è£…é¥°å™¨æ‰©å±•ç±»çš„å±æ€§å’Œæ–¹æ³•
function descc(target: any) {
  console.log('---------------ç±»çš„è£…é¥°å™¨å‚æ•° start------------------');
  console.log(target);
  console.log('---------------ç±»çš„è£…é¥°å™¨å‚æ•° end------------------');
  return class extends target { // åœ¨reacté«˜é˜¶ç»„ä»¶ä¸­ç»å¸¸çœ‹åˆ°è¿™ç§å†™æ³•
    private _gender: string
    name = '';
    age = 0

    constructor(name: string, age: number) {
      super()
      this._gender = 'ç”·'
      this.name = name
      this.age = age
    }

    say() {
      console.log(this.name, this.age, this._gender);
    }
  }
}

@descc
class Person2 {
  public name: string | undefined;
  public age: number | 0;

  constructor(name: string, age: number) {
    this.name = name;
    this.age = age;
  }

  say() {
    // this.say()
    console.log('hahahah')
    this.name = 'test'
  }
}

// let p2 = new Person2('å“ˆå“ˆ', 20);
// console.log(p2);
// p2.say();


// 3ã€è£…é¥°å™¨å·¥å‚çš„å†™æ³•
function desc3(params: string) {
  return function (target: any) {
    console.log('---------------å‚æ•°è¯´æ˜ start------------------');
    console.log('params', params);
    console.log('target', target);
    console.log('---------------å‚æ•°è¯´æ˜ end------------------');
    // ç›´æ¥åœ¨åŸå‹ä¸Šæ‰©å±•ä¸€ä¸ªå±æ€§
    target.prototype.apiUrl = params;
  }
}

@desc3('http://www.baidu.com')
class P {
  say() {
    console.log('è¯´è¯')
  }
}

let p3: any = new P();
// console.log(p3.apiUrl);


// æ–¹æ³•è£…é¥°å™¨
/**
 * 
 * @param constructor å®ƒä¼šè¢«åº”ç”¨åˆ°æ–¹æ³•çš„ å±æ€§æè¿°ç¬¦ä¸Šï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–è€…æ›¿æ¢æ–¹æ³•å®šä¹‰ã€‚
æ–¹æ³•è£…é¥°ä¼šåœ¨è¿è¡Œæ—¶ä¼ å…¥ä¸‹åˆ—3ä¸ªå‚æ•°ï¼š

1ã€å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚
2ã€æˆå‘˜çš„åå­—ã€‚
3ã€æˆå‘˜çš„å±æ€§æè¿°ç¬¦{value: any, writable: boolean, enumerable: boolean, configurable: boolean}ã€‚
 */
function addAge(constructor: Function) {
  constructor.prototype.age = 18;
}

function method(target: any, propertyKey: string, descriptor: PropertyDescriptor) {
  console.log(target);
  console.log("prop " + propertyKey);
  console.log("desc " + JSON.stringify(descriptor) + "\n\n");
};

@addAge
class Hello {
  name: string;
  age: number;
  constructor() {
    console.log('hello');
    this.name = 'yugo';
    this.age = 17
  }

  @method
  hello() {
    return 'instance method';
  }

  @method
  static shello() {
    return 'static method';
  }
}

// è®¿é—®å™¨è£…é¥°å™¨
/**
* è®¿é—®å™¨è£…é¥°å™¨åº”ç”¨äºè®¿é—®å™¨çš„å±æ€§æè¿°ç¬¦ï¼Œå¯ç”¨äºè§‚å¯Ÿï¼Œä¿®æ”¹æˆ–æ›¿æ¢è®¿é—®è€…çš„å®šä¹‰ã€‚ è®¿é—®å™¨è£…é¥°å™¨ä¸èƒ½åœ¨å£°æ˜æ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œä¹Ÿä¸èƒ½åœ¨ä»»ä½•å…¶ä»–ç¯å¢ƒä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ï¼ˆä¾‹å¦‚åœ¨å£°æ˜ç±»ä¸­ï¼‰ã€‚
*/
function configurable(value: boolean) {
  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {
    descriptor.configurable = value;
  };
}

class Point {
  private _x: number;
  private _y: number;
  constructor(x: number, y: number) {
    this._x = x;
    this._y = y;
  }

  @configurable(false)
  get x() { return this._x; }

  @configurable(false)
  get y() { return this._y; }
}

// æ–¹æ³•å‚æ•°è£…é¥°å™¨
const parseConf: any = [];
class Modal {
  @parseFunc
  public addOne(@parse('number') num) {
    console.log('num:', num);
    return num + 1;
  }
}

// åœ¨å‡½æ•°è°ƒç”¨å‰æ‰§è¡Œæ ¼å¼åŒ–æ“ä½œ
function parseFunc(target: any, name: string, descriptor: any) {
  const originalMethod = descriptor.value;
  descriptor.value = function (...args: any[]) {
    for (let index = 0; index < parseConf.length; index++) {
      const type = parseConf[index];
      console.log(type);
      switch (type) {
        case 'number':
          args[index] = Number(args[index]);
          break;
        case 'string':
          args[index] = String(args[index]);
          break;
        case 'boolean':
          args[index] = String(args[index]) === 'true';
          break;
      }
      return originalMethod.apply(this, args);
    }
  };
  return descriptor;
}

// å‘å…¨å±€å¯¹è±¡ä¸­æ·»åŠ å¯¹åº”çš„æ ¼å¼åŒ–ä¿¡æ¯
function parse(type: any) {
  return function (target: any, name: any, index: number) {
    parseConf[index] = type;
    console.log('parseConf[index]:', type);
  };
}
let modal = new Modal();
console.log(modal.addOne('10')); // 11
```

