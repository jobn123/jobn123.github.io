---
layout:     post
title:      "ä»é›¶åˆ°ä¸€åˆ›å»ºè„šæ‰‹æ¶-03-yargs"
subtitle:   " ğŸ“„ "
date:       2020-10-11 12:00:00
author:     "Hiz"
header-img: "img/post-bg-2015.jpg"
catalog: true
tags:
    - npm
---

# ç®€ä»‹

Yargs æ¡†æ¶é€šè¿‡ä½¿ç”¨ Node.js æ„å»ºåŠŸèƒ½å…¨é¢çš„å‘½ä»¤è¡Œåº”ç”¨ï¼Œå®ƒèƒ½è½»æ¾é…ç½®å‘½ä»¤ï¼Œè§£æå¤šä¸ªå‚æ•°ï¼Œå¹¶è®¾ç½®å¿«æ·æ–¹å¼ç­‰ï¼Œè¿˜èƒ½è‡ªåŠ¨ç”Ÿæˆå¸®åŠ©èœå•

```javascript
const yargs = require('yargs/yargs');
const { hideBin } = require('yargs/helpers'); // å‚æ•°è§£æ
const dedent = require('dedent');

const arg = hideBin(process/argv);
const cli = yargs(arg);

cli
  .usage('usage: tyo-cli [command] <options>') // å‘½ä»¤ä½¿ç”¨ä»‹ç»
  demandCommand(1, "A Command is required. Press --help to see all avaiable commands and options") // æœ€å°‘æœŸæœ›çš„å‘½ä»¤ä¸ªæ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™æç¤º
  .recommendCommands()   // å½“å‘½ä»¤è¾“å…¥é”™è¯¯æ—¶ï¼Œä»æ³¨å†Œçš„å‘½ä»¤ä¸­æ‰¾ç›¸è¿‘çš„ã€‚
  .strict() // ä¸¥æ ¼æ¨¡å¼ï¼Œå½“å‘½ä»¤ä¸å­˜åœ¨ï¼Œæç¤º
  .fail((msg, err) => {
    console.log('err:'+err)
    console.log('msg:'+msg)
  }) // å‘½ä»¤æ‰§è¡Œå¤±è´¥æ—¶å¤„ç†
  .alias('h', 'help')   // åˆ«å -h = --help
  .alias('v', 'version') // åˆ«å -v = --version
  .wrap(cli.terminalWidth())   // ä¿®æ”¹cliçš„å®½åº¦
  .epilogue(dedent(`For more infomation see https://github.com/yargs`)) // cli ç»“å°¾æç¤ºä¿¡æ¯
  .options({
    debug: {
      type: 'boolean',
      describe: 'æè¿°',
      alias: 'd'
    },
    logLevel: {
      type: 'string',
      describe: 'æè¿°',
    }
  }) // å…¨å±€å‚æ•°èµ·ä½œç”¨
  .option('registry', {
    type: 'boolean',
    describe: 'Define registry',
    alias: 'r',
    hidden: true // æ˜¯å¦ä½œä¸ºä¸€ä¸ªéšè—å‘½ä»¤ä½¿ç”¨ï¼Œå¼€å‘è°ƒè¯•ç”¨
  })
  .group(['debug'], 'Dev options:') // æè¿°åˆ†ç»„
  .group(['registry'], 'Extra options:')
  .command('init [name]', 'Do init a project', (yargs) => {
    yargs
      .option('name', {
        type: 'string',
        describe: 'Name of project',
        alias: 'n'
      })
  }, (argv) => {
    console.log(argv)
  })
  .command({
    command: 'ls',
    aliases: ['ls', 'la', 'll'],
    describe: 'list local packages',
    builder: (yargs) => {},
    handler: (argv) => {}
  })
  .parse(argv, {version: 2.0})  // å°†å‚æ•°æ³¨å…¥åˆ°å‘½ä»¤ä¸­
```